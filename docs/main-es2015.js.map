{"version":3,"sources":["./$_lazy_route_resources|lazy|groupOptions: {}|namespace object","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/pages/game/game.component.ts","./src/app/pages/game/game.component.html","./src/app/pages/game/game.module.ts","./src/app/pages/game/index.ts","./src/app/pages/game/ribbon.component.ts","./src/app/pages/game/strategy-card.component.ts","./src/app/pages/game/strategy-card.component.html","./src/app/pages/game/value-gauge.component.html","./src/app/pages/game/value-gauge.component.ts","./src/app/pages/title-screen/title-screen.component.ts","./src/app/pages/title-screen/title-screen.component.html","./src/app/shared/d3.service.ts","./src/app/shared/index.ts","./src/app/shared/shared.service.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 98255;\nmodule.exports = webpackEmptyAsyncContext;","import { NgModule } from '@angular/core';\nimport { Routes, \n         RouterModule } from '@angular/router';\n\nimport { TitleScreenComponent } from './pages/title-screen/title-screen.component';\nimport { GameComponent } from './pages/game';\n\nconst routes: Routes = [\n  { path: '', \n    component: TitleScreenComponent },\n  { path: 'start', \n    component: TitleScreenComponent },\n  { path: 'game', \n    component: GameComponent },\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, { relativeLinkResolution: 'legacy' })],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\nimport { trigger,\n         style,\n         animate,\n         transition } from '@angular/animations';\n\nimport { ANIMATION_TIMING,\n         SharedService} from './shared/shared.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.sass'],\n  animations: [\n    trigger('fadeInOut', [\n      transition(':enter', [\n        style({\n          opacity: 0,\n        }),\n        animate(ANIMATION_TIMING, style({\n          opacity: 1,\n        })),\n      ]),\n      transition(':leave', [\n        style({\n          opacity: 1,\n        }),\n        animate(ANIMATION_TIMING, style({\n          opacity: 0,\n        })),\n      ]),\n    ]),\n  ],\n})\nexport class AppComponent {\n  public isLoading: boolean = true;\n\n  constructor(\n    private shared: SharedService\n  ) {\n    this.shared.ready.subscribe(value => {\n      this.isLoading = !value;\n    });\n  }\n}\n","<div *ngIf=\"isLoading\"\n     class=\"loading\"\n     @fadeInOut>\n</div>\n<div *ngIf=\"!isLoading\"\n     class=\"content\"\n     @fadeInOut>\n  <router-outlet></router-outlet>\n</div>","import { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NgModule } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { TitleScreenComponent } from './pages/title-screen/title-screen.component';\nimport { GameModule } from './pages/game';\nimport { SharedService, \n         D3Service } from './shared';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    TitleScreenComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    AppRoutingModule,\n    HttpClientModule,\n    GameModule\n  ],\n  providers: [\n    SharedService, \n    D3Service\n  ],\n  bootstrap: [ AppComponent ]\n})\nexport class AppModule { }\n","import { \n  Component, \n  OnDestroy,\n  OnInit \n} from '@angular/core';\nimport { \n  ActivatedRoute,\n  NavigationEnd,\n  Router \n} from '@angular/router';\nimport { \n  trigger,\n  state,\n  style,\n  animate,\n  transition \n} from '@angular/animations';\nimport { Subscription } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport { \n  ANIMATION_DURATION_MS,\n  ANIMATION_EASING,\n  ANIMATION_TIMING,\n  ANIMATION_TIMING_DELAYED,\n  PERSPECTIVE,\n  Indicator,\n  LocalizedString,\n  Ribbon,\n  Scenario,\n  SharedService,\n  Strategy,\n} from '../../shared';\nimport { ResultChartData } from './result-chart.component';\n\n\n// See startRound()\ntype AnimationDirection = 'backward' | 'forward';\ntype AnimationState = 'current-enter' | 'current' | 'current-noTransition' | 'previous' | 'previous-noTransition' | 'previous-leave';\ntype QueueStep = number | (() => void);\ntype Queue = QueueStep[];\n\nconst DATA_KEY_VERSION = 'v';\nconst DATA_KEY_SHOWREPORT = 'r';\nconst DATA_SEPARATOR = ',';\nconst DATA_KEY_STRATEGIES = 's';\nconst ROUND_BASE = 1;\n\nconst ANIMATION_DURATION_PREVIOUS_CARDS_MS = 450;\nconst ANIMATION_TIMING_PREVIOUS_CARDS_MS = `${ANIMATION_DURATION_PREVIOUS_CARDS_MS}ms ${ANIMATION_EASING}`;\n\n/*\n * For convenience\n */\nconst sum = function sum(arr: Array<number>): number {\n  return arr.reduce((a, b) => a + b, 0);\n}\nconst clamp = function clamp(num: number, min: number = null, max: number = null): number {\n  return num <= min ? min : num >= max ? max : num;\n}\nconst processQueue = function processQueue(queue: Queue) {\n  if (queue.length < 1)\n    return;\n\n  const step = queue.shift();\n\n  if (typeof step === 'number') {\n    setTimeout(() => processQueue(queue), step);\n  } else {\n    step();\n    processQueue(queue);\n  }\n}\n\n@Component({\n  selector: 'app-game',\n  templateUrl: './game.component.html',\n  styleUrls: ['./game.component.sass'],\n  animations: [\n    trigger('fadeInOut', [\n      transition(':enter', [\n        style({\n          opacity: 0,\n        }),\n        animate(ANIMATION_TIMING, style({\n          opacity: 1,\n        })),\n      ]),\n      transition(':leave', [\n        style({\n          opacity: 1,\n        }),\n        // We add a delay to allow for the :enter animation to finish first\n        // when switching subcategories\n        animate(ANIMATION_TIMING_DELAYED, style({\n          opacity: 0,\n        })),\n      ]),\n    ]),\n    trigger('strategyCards', [\n      state('current-enter',\n        style({\n          opacity: 0,\n          transform: 'translateY(60vh)'\n        }),\n      ),\n      state('current, current-noTransition',\n        style({\n          opacity: 1,\n          transform: 'none'\n        }),\n      ),\n      state('previous, previous-noTransition',\n        style({\n          opacity: 0.3,\n          transform: 'translateY(-2.5rem) scale(0.9)',\n        })\n      ),\n      state('previous-leave',\n        style({\n          opacity: 0.0,\n          transform: 'translateY(-5rem) scale(0.8)',\n        })\n      ),\n      transition('current-enter <=> current, current <=> previous, previous <=> previous-leave', [\n        animate(ANIMATION_TIMING_PREVIOUS_CARDS_MS)\n      ]),\n    ]),\n    trigger('previousCards', [\n      state('current',\n        style({\n          opacity: 0.3,\n          transform: 'translateY(-2.5rem) scale(0.9)',\n        })\n      ),\n      state('previous',\n        style({\n          opacity: 0.0,\n          transform: 'translateY(-5rem) scale(0.8)',\n        })\n      ),\n      state('next',\n        style({\n          opacity: 0.0,\n          transform: 'translateY(-2.5rem) scale(0.9)',\n        })\n      ),\n      transition('current <=> previous', [\n        animate(ANIMATION_TIMING_PREVIOUS_CARDS_MS)\n      ]),\n    ]),\n    trigger('previousCardsFade', [\n      state('faded', style({\n        opacity: 0.15\n      })),\n      state('normal', style({\n        opacity: 0.3\n      })),\n      transition('normal <=> faded', [\n        animate(ANIMATION_TIMING_PREVIOUS_CARDS_MS)\n      ])\n    ]),\n    trigger('ribbon', [\n      transition(':enter', [\n        style({\n          transform: 'scale(0)'\n        }),\n        // We add a delay to allow for the :leave animation to finish first\n        animate(ANIMATION_TIMING, style({\n          transform: 'scale(1)'\n        })),\n      ]),\n      transition(':leave', [\n        style({\n          transform: 'scale(1)'\n        }),\n        // We add a delay to allow for the :leave animation to finish first\n        animate(ANIMATION_TIMING, style({\n          transform: 'scale(0)'\n        })),\n      ])\n    ]),\n    trigger('scenario', [\n      state('current',\n        style({\n          opacity: 1,\n          transform: `${PERSPECTIVE}`,\n        })\n      ),\n      state('previous',\n        style({\n          opacity: 0,\n          transform: `${PERSPECTIVE} translate3d(0px, 15vh, -400px)`,\n        })\n      ),\n      state('current-enter',\n        style({\n          opacity: 0,\n          transform: `${PERSPECTIVE} translate3d(0px, -25vh, 500px)`\n        })\n      ),\n      transition('current <=> *', [\n        animate(ANIMATION_TIMING_PREVIOUS_CARDS_MS)\n      ]),\n    ]),\n  ],\n})\nexport class GameComponent implements OnDestroy, OnInit {\n\n  animationDirection: AnimationDirection = 'forward';\n  bottomDialog: {\n    text: string,\n    confirm: () => void\n  };\n  currentCardsTrigger: AnimationState = 'current-enter';\n  enableGoToPrevious: boolean = false;\n  inFeedbackPhase: boolean = false;\n  performanceIndicators: Indicator[] = [];\n  organisationalAttributes: Indicator[] = [];\n  playedScenarios: Scenario[] = [];\n  playedStrategies: Strategy[] = [];\n  previousCardsTrigger: AnimationState = 'current-enter';\n  previousStrategyCards: Strategy[] = [];\n  ribbons: Ribbon[] = [];\n  roundStarting: boolean = false;\n  scenarioTrigger: AnimationState = 'current-enter';\n  showGameOverDialog: boolean = false;\n  showReport: boolean = false;\n  showScenario: boolean = false;\n  strategyCards: Strategy[] = [];\n  topDialog: {\n    text: string,\n    confirm: () => void\n  };\n\n  private _subscriptions = new Array<Subscription>();\n\n  constructor(\n    private route:     ActivatedRoute,\n    private router:    Router,\n    private shared:    SharedService\n  ) {\n    this.resetState();\n    this.performanceIndicators = Object.values(this.shared.indicators).filter(i => i.type === 'performance');\n    this.organisationalAttributes = Object.values(this.shared.indicators).filter(i => i.type === 'organisation');\n  }\n\n  ngOnInit(): void {\n    this.readParams();\n    // We need to explicitly read the params whenever navigating\n    // as onInit won't be called while we stay on the same page\n    this._subscriptions.push(\n      this.router.events.pipe(\n        filter(evt => evt instanceof NavigationEnd)\n      ).subscribe(() => this.readParams())\n    );\n  }\n\n  ngOnDestroy(): void {\n    this._subscriptions.forEach(s => s.unsubscribe());\n  }\n\n\n  /**************************************\n   * GETTERS                            *\n   **************************************/\n\n  /*\n   * Note that round is ROUND_BASE-based (= 1)\n   */\n  get round(): number {\n    return this.rawRound + ROUND_BASE;\n  }\n\n  get lastRound(): number {\n    return this.shared.settings.rounds;\n  }\n\n  /*\n   * The absolute round without ROUND_BASE\n   */\n  get rawRound(): number {\n    return this.playedStrategies.length;\n  }\n\n  get isFirstRound(): boolean {\n    return this.rawRound === 0;\n  }\n  \n  get roundsLeft(): number {\n    return this.shared.settings.rounds - this.rawRound;\n  }\n\n  get roundsUsedPercentage(): number {\n    return (this.rawRound + 1) / this.shared.settings.rounds * 100;\n  }\n\n  get gameOver(): boolean {\n    return (this.roundsLeft <= 0 || !this.scenario.strategies || this.scenario.strategies.length === 0)\n           && !this.showReport;\n  }\n\n  get latestStrategy(): Strategy {\n    if (this.playedStrategies.length === 0)\n      return null;\n    return this.playedStrategies[this.playedStrategies.length - 1];\n  }\n\n  get previousScenario(): Scenario {\n    return this.playedScenarios.length > 1 ? \n           this.playedScenarios[this.playedScenarios.length - 2] :\n           null;\n  }\n\n\n  get scenario(): Scenario {\n    return this.playedScenarios[this.playedScenarios.length - 1];\n  }\n\n  /*\n   * Get the top position of the ribbon at the given index\n   */\n  getRibbonTop(index: number): string {\n    if (this.ribbons.length === 0)\n      return '0%';\n    // NB. Match last measurement to ribbon height\n    return `calc(${index} / ${this.ribbons.length} * (100% - 11.6979592rem))`;\n  }\n\n\n  /**************************************\n   * VALUE INITIALISATION               *\n   **************************************/\n\n  /*\n   * Perform a number of steps at the start of the round with \n   * delays in between them.\n   */\n  startRound(): void {\n\n    let queue: Queue;\n\n    console.log(this.animationDirection);\n    \n    if (this.animationDirection === 'backward')\n      queue = [\n        () => this.resetState(),\n        // This sets a class of the same name, which highlights indicators\n        () => this.roundStarting = true,\n        225,\n        () => this.currentCardsTrigger = 'current-enter',\n        () => this.previousCardsTrigger = 'current',\n        () => this.scenarioTrigger = 'current-enter',\n        ANIMATION_DURATION_PREVIOUS_CARDS_MS,\n        () => this.initScenarios(),\n        () => this.scenarioTrigger = 'previous',\n        100,\n        () => this.scenarioTrigger = 'current',\n        () => this.initIndicators(),\n        () => this.initRibbons(),\n        () => {\n          this.initPreviousStrategyCards();\n          this.initStrategyCards();\n          this.previousCardsTrigger = 'previous-leave';\n          this.currentCardsTrigger = 'current-noTransition';\n        },\n        225,\n        () => this.previousCardsTrigger = 'previous',\n        1000,\n        () => this.roundStarting = false\n      ];\n    else\n      queue = [\n        // NB. This unflips the card just played, so we must wait for that\n        () => this.resetState(),\n        3 * ANIMATION_DURATION_MS,\n        // This sets a class of the same name, which highlights indicators\n        () => this.roundStarting = true,\n        () => this.currentCardsTrigger = 'previous',\n        () => this.previousCardsTrigger = 'previous-leave',\n        () => this.scenarioTrigger = 'previous',\n        ANIMATION_DURATION_PREVIOUS_CARDS_MS,\n        () => {\n          this.initScenarios();\n          this.scenarioTrigger = 'current-enter';\n        },\n        () => this.scenarioTrigger = 'current',\n        ANIMATION_DURATION_PREVIOUS_CARDS_MS,\n        () => this.initIndicators(),\n        () => this.initRibbons(),\n        1500,\n        () => {\n          if (this.gameOver)\n            this.showGameOverDialog = true;\n          else {\n            this.initPreviousStrategyCards();\n            this.initStrategyCards();\n            this.previousCardsTrigger = 'previous-noTransition';\n            this.currentCardsTrigger = 'current-enter';\n          }\n        },\n        225,\n        () => {\n          if (!this.gameOver)\n            this.currentCardsTrigger = 'current';\n        },\n        1000,\n        () => this.roundStarting = false\n      ];\n\n    processQueue(queue);\n\n  }\n\n  resetState(): void {\n    this.bottomDialog = undefined;\n    this.enableGoToPrevious = false;\n    this.inFeedbackPhase = false;\n    this.roundStarting = false;\n    this.showGameOverDialog = false;\n    this.showScenario = false;\n    this.showReport = false;\n    this.topDialog = undefined;\n\n    // Set the correct flipped/locked states for strategies\n    for (const sid in this.shared.strategies) {\n      const s = this.shared.strategies[sid];\n      s.locked = s.flipped = false;\n      // if (!this.playedStrategies.includes(s))\n      //   s.locked = s.flipped = false;\n      // else\n      //   s.locked = s.flipped = true;\n    }\n  }\n\n  initScenarios(): void {\n    const scenarios = [this.shared.firstScenario];\n    this.playedStrategies.map(s => \n      scenarios.push(this.shared.scenarios[s.scenario])\n    );\n    this.playedScenarios = scenarios;\n  }\n\n  initIndicators(): void {\n\n    for (const iid in this.shared.indicators) {\n\n      // Calc values based on the effects of all played scenarios and strategies\n      const indicator = this.shared.indicators[iid];\n\n      let value = indicator.initialValue ?? 0,\n          previousValue = indicator.initialValue ?? 0;\n      \n      this.playedScenarios.forEach((s, i) => {\n        const effect = s.effects?.[iid] ?? 0;\n        value += effect;\n        if (i < this.playedScenarios.length - 1)\n          previousValue += effect;\n      });\n      this.playedStrategies.forEach((s, i) => {\n        const effect = s.effects?.[iid] ?? 0;\n        value += effect;\n        if (i < this.playedStrategies.length - 1)\n          previousValue += effect;\n      });\n\n      indicator.value = value;\n      indicator.previousValue = previousValue;\n    }\n  }\n\n  initRibbons(): void {\n    const ribbons = [];\n    this.playedStrategies\n      .filter(s => s.ribbons?.length > 0)\n      .forEach(s => s.ribbons.forEach(r => \n        ribbons.push(this.shared.ribbons[r])  \n      ));\n    this.ribbons = ribbons;\n  }\n\n  initPreviousStrategyCards(): void {\n    this.previousStrategyCards = (this.previousScenario?.strategies ?? []).map(s => this.shared.strategies[s]);\n  }\n\n  initStrategyCards(): void {\n    this.strategyCards = (this.scenario.strategies ?? []).map(s => this.shared.strategies[s]);\n    this.enableGoToPrevious = true;\n  }\n\n  /**************************************\n   * USER ACTIONS                       *\n   **************************************/\n\n  goToPreviousRound(event?: Event): void {\n    // Prevent clicks when we are still waiting for this round's strategies\n    if (!this.enableGoToPrevious)\n      return;\n\n    // True here means we go back\n    this.updateUrl(true);\n  }\n\n\n  loadStrategyCards(): void {\n    setTimeout(() => this.initStrategyCards(), ANIMATION_DURATION_MS);\n  }\n\n  /*\n   * Selecting a strategy goes in three steps:\n   * 1. Lock the card => onCardLocked\n   * 2. Confirm => showStrategyFeedback\n   * 3. Go to next round => executeStrategy => startRound\n   */\n  onCardLocked(strategy: Strategy): void {\n\n    if (this.inFeedbackPhase)\n      return;\n\n    if (!strategy.locked) {\n      // Only one strategy can be locked at the same time\n      this.strategyCards.forEach(s => s.locked = false);\n      strategy.locked = true;\n\n      this.bottomDialog = {\n        text: this.t('Execute selected strategy'),\n        confirm: () => this.showStrategyFeedback(strategy)\n      };\n\n    } else {\n      strategy.locked = false;\n      this.bottomDialog = undefined;\n    }\n     \n  }\n\n  showStrategyFeedback(strategy: Strategy): void {\n\n    const queue: Queue = [\n      () => {\n        strategy.flipped = true;\n        // This disables further selection of strategies\n        this.inFeedbackPhase = true;\n        this.bottomDialog = undefined;\n        this.playedStrategies.push(strategy);\n        // Update indicators (nb. the next scenario doesn't affect these yet)\n      },\n      225,\n      () => this.initIndicators(),\n      775,\n      () => this.scenarioTrigger = 'previous',\n      1000,\n      () => this.topDialog = {\n        text: this.t('Start next round'),\n        confirm: () => this.executeStrategy(strategy)\n      }\n    ];\n\n    processQueue(queue);\n\n  }\n\n  executeStrategy(strategy: Strategy): void {\n    this.updateUrl();\n  }\n\n  modalClick(event?: Event): void {\n    this.startOver(event);\n  }\n\n  startOver(event?: Event): void {\n    // We are just navigating to the title screen\n    this.router.navigate(['/']);\n    // To disable background click\n    event?.stopPropagation();\n  }\n\n  /**************************************\n   * URL PARAMS                         *\n   **************************************/\n\n  public updateUrl(goBack: boolean = false): void {\n    // We use router to save the game data between sessions\n    this.router.navigate([{\n      [DATA_KEY_VERSION]:    this.shared.settings.version,\n      [DATA_KEY_STRATEGIES]: this._encodeIds(goBack && this.playedStrategies.length > 0 ? \n                                             this.playedStrategies.slice(0, -1) : \n                                             this.playedStrategies),\n      [DATA_KEY_SHOWREPORT]: this.showReport ? 1 : 0,\n    }]);\n  }\n\n  public readParams(): void {\n    // Only load purchases from route data if the application versions match\n    // Otherwise reset the state to handle the going back to an url without params\n    if (this.route.snapshot.params?.[DATA_KEY_VERSION] && \n        this.route.snapshot.params[DATA_KEY_VERSION] == this.shared.settings.version) {\n\n      // Save current round here, so we can check which direction to animate to\n      const currentRound = this.round;\n\n      if (this.route.snapshot.params[DATA_KEY_STRATEGIES])\n        this.playedStrategies = this._decodeIds(this.route.snapshot.params[DATA_KEY_STRATEGIES]);\n      else\n        this.playedStrategies = [];\n\n      // NB. This only counts the round number, so if we were to edit the url\n      // manually, we would get an inconsistent transition\n      this.animationDirection = this.round < currentRound ? 'backward' : 'forward';\n      \n      if (this.route.snapshot.params[DATA_KEY_SHOWREPORT] && \n          this.route.snapshot.params[DATA_KEY_SHOWREPORT] == 1)\n        this.showReport = true;\n      else\n        this.showReport = false;\n    }\n    // This resets the screen\n    this.startRound();\n  }\n\n  private _encodeIds(list: Strategy[]): string {\n    return list.map(s => s.id).join(DATA_SEPARATOR);\n  }\n  private _decodeIds(text: string): Strategy[] {\n    return text.split(DATA_SEPARATOR).map(s => this.shared.strategies[s]);\n  }\n\n  /**************************************\n   * TEXT LOCALISATION                  *\n   **************************************/\n\n  /*\n   * Localize a string or LocalizedString object\n   * See SharedService\n   */\n  public t(text: string | LocalizedString): string {\n    return this.shared.getText(text);\n  }\n\n  // /*\n  //  * Get data for the resultChart component to use\n  //  */\n  // public get resultChartData(): ResultChartData {\n  //   throw new Error(\"Not implemented\");\n  //   const data = new Array<any>();\n  //   const purchases = this.purchasesAndPassedRounds;\n\n  //   // NB. This code is partly copied from getAccumulatedReturns\n  //   let balance = this.shared.settings.balance;\n  //   for (let i = 0; i <= purchases.length; i++) {\n  //     const returns = this.getTotalReturns(purchases.slice(0, i));\n  //     balance += returns;\n  //     balance -= i === 0 ? 0 : purchases[i - 1].price;\n  //     data.push({\n  //       round:      i + ROUND_BASE,\n  //       balance:    balance,\n  //       returns:    returns,\n  //       investment: this.t(i === 0 ? 'Start' : (purchases[i - 1] instanceof NullInvestment ? 'Pass' : purchases[i - 1].title))\n  //     });\n  //   }\n  //   return data;\n  // }\n\n}","<div id=\"grid\"\n     [class.showIndicators]=\"roundStarting || inFeedbackPhase\"\n     @fadeInOut>\n\n  <section id=\"performanceIndicators\">\n\n    <app-value-gauge *ngFor=\"let indicator of performanceIndicators\"\n                     type=\"bar\"\n                     [value]=\"indicator.value\"\n                     [previousValue]=\"indicator.previousValue\"\n                     [titleBottom]=\"indicator.titleBottom\"\n                     [titleTop]=\"indicator.titleTop\"\n                     [min]=\"indicator.minValue\"\n                     [max]=\"indicator.maxValue\"\n                     [matTooltip]=\"t(indicator.toolTip)\"></app-value-gauge>\n\n  </section>\n\n  <section id=\"previousStrategyCards\"\n           (click)=\"goToPreviousRound($event)\"\n           [@strategyCards]=\"previousCardsTrigger\">\n\n    <!-- @previousCardsFade]=\"showLoadStrategyCardsDialog ? 'faded' : 'normal'\" -->\n\n    <app-strategy-card *ngFor=\"let card of previousStrategyCards\"\n                       [title]=\"card.title\"\n                       [description]=\"card.description\"\n                       [descriptionBack]=\"card.feedback\"\n                       [flipped]=\"card.flipped\"\n                       [locked]=\"card.locked\"\n                       [disabled]=\"true\"\n                       (cardLocked)=\"onCardLocked(card)\"></app-strategy-card>\n\n  </section>\n\n  <section id=\"strategyCards\"\n           [@strategyCards]=\"currentCardsTrigger\">\n\n    <app-strategy-card *ngFor=\"let card of strategyCards\"\n                       [title]=\"card.title\"\n                       [description]=\"card.description\"\n                       [descriptionBack]=\"card.feedback\"\n                       [flipped]=\"card.flipped\"\n                       [locked]=\"card.locked\"\n                       [disabled]=\"inFeedbackPhase\"\n                       (cardLocked)=\"onCardLocked(card)\"></app-strategy-card>\n\n  </section>\n\n  <section *ngIf=\"showGameOverDialog\"\n           id=\"middleDialog\"\n           @fadeInOut>\n\n    <button type=\"button\"\n            (click)=\"startOver()\"\n            [innerHTML]=\"t('Start a New Game')\">\n    </button>\n\n  </section>\n\n  <!-- <section *ngIf=\"showLoadStrategyCardsDialog\"\n           id=\"loadStrategyCardsDialog\"\n           @fadeInOut>\n\n    <button *ngIf=\"!gameOver\"\n            type=\"button\"\n            (click)=\"loadStrategyCards()\"\n            [innerHTML]=\"t('Show Available Strategies')\">\n    </button>\n\n    <button *ngIf=\"gameOver\"\n            type=\"button\"\n            (click)=\"startOver()\"\n            [innerHTML]=\"t('Start a New Game')\">\n    </button>\n\n  </section> -->\n\n  <section id=\"scenario\">\n\n    <div id=\"roundIndicator\">\n      <mat-progress-spinner color=\"white\"\n                            mode=\"determinate\"\n                            [value]=\"roundsUsedPercentage\">\n      </mat-progress-spinner>\n      <div class=\"roundText\">\n        <span class=\"roundText-current\">{{ round }}</span>\n        <span class=\"roundText-slash\">/</span>\n        <span class=\"roundText-last\">{{ lastRound }}</span>\n      </div>\n    </div>\n\n    <div id=\"scenarioContent\"\n         [@scenario]=\"scenarioTrigger\">\n\n      <h1 [innerHTML]=\"t(scenario?.title)\"></h1>\n      \n      <div class=\"description\"\n          [innerHTML]=\"t(scenario?.description)\"></div>\n\n    </div>\n\n  </section>\n\n  <section *ngIf=\"topDialog\"\n           id=\"topDialog\"\n           @fadeInOut>\n\n    <button type=\"button\"\n            (click)=\"topDialog.confirm()\"\n            [innerHTML]=\"t(topDialog.text)\">\n    </button>\n\n  </section>\n\n  <section id=\"organisationalAttributes\">\n\n    <app-value-gauge *ngFor=\"let indicator of organisationalAttributes\"\n                     type=\"dot\"\n                     [value]=\"indicator.value\"\n                     [previousValue]=\"indicator.previousValue\"\n                     [titleBottom]=\"indicator.titleBottom\"\n                     [titleTop]=\"indicator.titleTop\"\n                     [min]=\"indicator.minValue\"\n                     [max]=\"indicator.maxValue\"\n                     [matTooltip]=\"t(indicator.toolTip)\"></app-value-gauge>\n\n  </section>\n\n  <section id=\"ribbons\">\n\n    <app-ribbon *ngFor=\"let ribbon of ribbons; index as i\"\n                [title]=\"ribbon.title\"\n                [matTooltip]=\"t(ribbon.description)\"\n                [style.top]=\"getRibbonTop(i)\"\n                @ribbon></app-ribbon>\n\n  </section>\n\n  <section *ngIf=\"bottomDialog\"\n           id=\"bottomDialog\"\n           @fadeInOut>\n\n    <button type=\"button\"\n            (click)=\"bottomDialog.confirm()\"\n            [innerHTML]=\"t(bottomDialog.text)\">\n    </button>\n\n  </section>\n\n</div>\n\n<!-- <div *ngIf=\"gameOver\"\n     (click)=\"modalClick($event)\"\n     class=\"modal\"></div> -->","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { GameComponent } from './game.component';\nimport { RibbonComponent } from './ribbon.component';\nimport { StrategyCardComponent } from './strategy-card.component';\nimport { ValueGaugeComponent } from './value-gauge.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    BrowserModule,\n    BrowserAnimationsModule,\n    MatProgressSpinnerModule,\n    MatTooltipModule\n  ],\n  exports: [\n    GameComponent,\n  ],\n  declarations: [\n    GameComponent,\n    RibbonComponent,\n    StrategyCardComponent,\n    ValueGaugeComponent\n  ],\n})\nexport class GameModule {}","export * from './game.component';\nexport * from './game.module';\nexport * from './ribbon.component';\nexport * from './strategy-card.component';\nexport * from './value-gauge.component';","import { \n  Component, \n  EventEmitter,\n  Input,\n  Output\n} from '@angular/core';\nimport { \n  LocalizedString,\n  SharedService\n} from '../../shared';\n\n\n/*\n * Show a strategy card that can be flipped over to see the feedback.\n */\n\n@Component({\n  selector: 'app-ribbon',\n  template: `<label>{{ t(title) }}</label>`,\n  styleUrls: ['./ribbon.component.sass']\n})\nexport class RibbonComponent {\n\n  @Input() title: string = '';\n\n  constructor(\n    private shared: SharedService\n  ) {\n  }\n\n  /*\n   * Localize a string or LocalizedString object\n   * See SharedService\n   */\n  t(text: string | LocalizedString): string {\n    return this.shared.getText(text);\n  }\n}","import { \n  Component, \n  EventEmitter,\n  Input,\n  Output\n} from '@angular/core';\nimport { \n  trigger,\n  state,\n  style,\n  animate,\n  transition \n} from '@angular/animations';\nimport { \n  ANIMATION_DURATION_MS,\n  PERSPECTIVE,\n  LocalizedString,\n  SharedService\n} from '../../shared';\n\nconst ANIMATION_DURATION_WITH_DELAY = `${ANIMATION_DURATION_MS}ms ${ANIMATION_DURATION_MS}ms`;\n\n/*\n * Show a strategy card that can be flipped over to see the feedback.\n */\n\n@Component({\n  selector: 'app-strategy-card',\n  templateUrl: './strategy-card.component.html',\n  styleUrls: ['./strategy-card.component.sass'],\n  animations: [\n    trigger('flip', [\n      state('visible', style({\n          transform: `${PERSPECTIVE} rotateY(0deg)`\n        })\n      ),\n      state('front-hidden', style({\n          transform: `${PERSPECTIVE} rotateY(-90deg)`\n        })\n      ),\n      state('back-hidden', style({\n          transform: `${PERSPECTIVE} rotateY(90deg)`\n        })\n      ),\n      transition('visible => front-hidden, visible => back-hidden', [\n        animate(ANIMATION_DURATION_MS),\n      ]),\n      transition('front-hidden => visible, back-hidden => visible', [\n        animate(ANIMATION_DURATION_WITH_DELAY),\n      ]),\n    ]),\n  ]\n})\nexport class StrategyCardComponent {\n\n  @Input() id: string = null;\n  @Input() title: string = '';\n  @Input() description: string = '';\n  @Input() buttonLabel: string = 'Lock This Strategy';\n  @Input() buttonLabelLocked: string = 'Strategy Locked';\n  @Input() titleBack: string = 'Feedback';\n  @Input() descriptionBack: string = '';\n  @Input() disabled: boolean = false;\n  @Input()\n  set flipped(value: boolean) {\n\n    if (this._flipped == value)\n      return;\n\n    this._flipped = value;\n\n    // Handle triggers for transitions here\n    if (this._flipped) {\n      this.backFlipTrigger = 'visible';\n      this.frontFlipTrigger = 'front-hidden';\n    } else {\n      this.backFlipTrigger = 'back-hidden';\n      this.frontFlipTrigger = 'visible';\n    }\n\n  };\n  get flipped(): boolean {\n    return this._flipped;\n  }\n  @Input() locked: boolean = false;\n\n  @Output() cardLocked = new EventEmitter<boolean>();\n\n  public backFlipTrigger: string = 'back-hidden';\n  public frontFlipTrigger: string = 'visible';\n  private _flipped: boolean = false;\n\n  constructor(\n    private shared: SharedService\n  ) {\n  }\n\n  toggleLocked(): void {\n    this.cardLocked.emit(!this.locked);\n  }\n\n  /*\n   * Localize a string or LocalizedString object\n   * See SharedService\n   */\n  t(text: string | LocalizedString): string {\n    return this.shared.getText(text);\n  }\n}","<section class=\"card front\"\n         [class.disabled]=\"disabled\"\n         [class.locked]=\"locked\"\n         [@flip]=\"frontFlipTrigger\">\n\n  <div class=\"content\">\n    <div class=\"description\"\n        [innerHTML]=\"t(description)\"></div>\n  </div>\n  \n  <label>\n    <span class=\"titleText\"\n          [innerHTML]=\"t(title)\"></span>\n  </label>\n\n  <button type=\"button\"\n          class=\"bottomButton\"\n          [disabled]=\"disabled\"\n          (click)=\"toggleLocked()\"\n          [innerHTML]=\"t(locked ? buttonLabelLocked : buttonLabel)\">\n  </button>\n  \n\n</section>\n\n<section class=\"card back\"\n         [@flip]=\"backFlipTrigger\">\n\n  <div class=\"content\">\n    <h3>\n      <span class=\"titleText\"\n            [innerHTML]=\"t(titleBack)\"></span>\n    </h3>\n    <div class=\"description\"\n        [innerHTML]=\"t(descriptionBack)\"></div>\n  </div>\n\n</section>","<div class=\"container\"\n     [class.bar]=\"isBar\"\n     [class.dot]=\"isDot\">\n\n  <div class=\"content\">\n    <div *ngIf=\"previousValue != null\"\n         class=\"previousValue\"\n         [style.left]=\"previousValueLeft\"></div>\n    <div *ngIf=\"isBar\"\n         class=\"valueBar\"\n         [style.width]=\"valueBarWidth\"></div>\n    <!-- <div *ngIf=\"isBar\"\n         class=\"valueBar valueChange\"\n         [class.negative]=\"valueChange &lt; 0\"\n         [style.left]=\"previousValueBarLeft\"\n         [style.width]=\"valueChangeWidth\"></div>\n    <div *ngIf=\"isDot\"\n         class=\"valueDot previousValue\"\n         [style.left]=\"previousValueDotLeft\"></div> -->\n    <div *ngIf=\"isDot\"\n         class=\"valueDot\"\n         [style.left]=\"valueDotLeft\"></div>\n  </div>\n\n  <label *ngIf=\"titleTop\"\n         class=\"titleTop\">\n    <span class=\"titleText\"\n          [innerHTML]=\"t(titleTop)\"></span>\n  </label>\n\n  <label *ngIf=\"titleBottom\"\n         class=\"titleBottom\">\n    <span class=\"titleText\"\n          [innerHTML]=\"t(titleBottom)\"></span>\n  </label>\n\n</div>","import { \n  Component, \n  Input\n} from '@angular/core';\nimport { \n  LocalizedString,\n  SharedService\n} from '../../shared';\n\n\nexport type ValueGaugeType = 'bar' | 'dot';\n\n\n/*\n * Show indicator values as either bars or dots on an axis.\n */\n\n@Component({\n  selector: 'app-value-gauge',\n  templateUrl: './value-gauge.component.html',\n  styleUrls: ['./value-gauge.component.sass']\n})\nexport class ValueGaugeComponent {\n\n  @Input() max: number = 10;\n  @Input() min: number = 0;\n  @Input() previousValue: number = undefined;\n  @Input() type: ValueGaugeType = 'bar';\n  @Input() titleBottom: string;\n  @Input() titleTop: string;\n  @Input() value: number = 0;\n\n  constructor(\n    private shared: SharedService\n  ) {\n  }\n\n  get isDot(): boolean {\n    return this.type === 'dot';\n  }\n\n  get isBar(): boolean {\n    return this.type === 'bar';\n  }\n\n  get valueFraction(): number {\n    if (this.range === 0)\n      return 0;\n    return (this.value - this.min) / this.range;\n  }\n\n  get previousValueFraction(): number {\n    if (this.range === 0)\n      return 0;\n    return (this.previousValue - this.min) / this.range;\n  }\n\n  get range(): number {\n    return this.max - this.min;\n  }\n\n  get valueBarWidth(): string {\n    return `${this.valueFraction * 100}%`;\n  }\n\n  get previousValueLeft(): string {\n    return this.isDot ? \n      this._calcDotPercentage(this.previousValueFraction) :\n      `${this.previousValueFraction * 100}%`;\n  }\n\n  // get valueChange(): number {\n  //   return this.valueFraction - this.previousValueFraction;\n  // }\n\n  // get valueChangeWidth(): string {\n  //   return `${Math.abs(this.valueChange) * 100}%`;\n  // }\n\n  get valueDotLeft(): string {\n    return this._calcDotPercentage(this.valueFraction);\n  }\n\n  // get previousValueDotLeft(): string {\n  //   const margin = 10;\n  //   return `${margin + this.valueFraction * (100 - 2 * margin)}%`;\n  // }\n\n  _calcDotPercentage(fraction: number): string {\n    const margin = 10;\n    return `${margin + fraction * (100 - 2 * margin)}%`;\n  }\n\n  /*\n   * Localize a string or LocalizedString object\n   * See SharedService\n   */\n  t(text: string | LocalizedString): string {\n    return this.shared.getText(text);\n  }\n}","import {\n  Component,\n  OnInit \n} from '@angular/core';\nimport { SharedService } from '../../shared';\n\n@Component({\n  selector: 'app-title-screen',\n  templateUrl: './title-screen.component.html',\n  styleUrls: ['./title-screen.component.sass']\n})\nexport class TitleScreenComponent implements OnInit {\n\n  constructor(\n    private shared: SharedService\n  ) { }\n\n  ngOnInit(): void {\n  }\n\n  public t(text: string): string {\n    return this.shared.getText(text);\n  }\n}\n","<div id=\"titleAndIntro\">\n  <h1 [innerHTML]=\"t('The Agile Quest Game')\"></h1>\n\n  <div [innerHTML]=\"t('TITLE_SCREEN_INTRO')\"></div>\n  \n  <button routerLink=\"game\" \n          [innerHTML]=\"t('Start game')\"></button>\n</div>\n\n<div id=\"authors\" \n     [innerHTML]=\"t('AUTHORS')\"></div>","import { Injectable } from '@angular/core';\n\nimport * as d3 from 'd3';\n\n/*\n * A basic wrapper around d3.js\n * To access the d3 namespace, use D3Service.d3\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class D3Service {\n  public d3: any = d3;\n\n  constructor(\n  ) {\n  }\n}\n","export * from './shared.service';\nexport * from './shared.types';\nexport * from './d3.service';","import { \n  EventEmitter,\n  Inject,\n  Injectable,\n  LOCALE_ID \n} from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { \n  BehaviorSubject,\n  forkJoin \n} from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { \n  Indicator,\n  LocalizedString,\n  Ribbon,\n  Scenario,\n  Settings,\n  Strategy,\n  Texts \n} from './shared.types';\n\n\nexport const ANIMATION_DURATION_MS: number = 225;\nexport const ANIMATION_DURATION: string = ANIMATION_DURATION_MS + 'ms';\nexport const ANIMATION_EASING: string = 'cubic-bezier(0.4, 0, 0.2, 1)'\nexport const ANIMATION_TIMING: string = `${ANIMATION_DURATION} ${ANIMATION_EASING}`;\nexport const ANIMATION_TIMING_DELAYED: string = `${ANIMATION_DURATION} ${ANIMATION_DURATION} ${ANIMATION_EASING}`;\nexport const DEFAULT_LOCALE = 'en-US';\nexport const PERSPECTIVE: string = 'perspective(1000px)';\nconst SETTINGS_URL = 'assets/data/settings.json';\nconst TEXTS_URL = 'assets/data/texts.json';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SharedService {\n\n  error = new EventEmitter<string>();\n  firstScenario: Scenario;\n  indicators: {[id: string]: Indicator} = {};\n  ready = new BehaviorSubject<boolean>(false);\n  ribbons: {[id: string]: Ribbon} = {};\n  scenarios: {[id: string]: Scenario} = {};\n  settings: {\n    version: number,\n    rounds: number,\n  };\n  strategies: {[id: string]: Strategy} = {};\n  texts: Texts;\n\n  constructor(\n    private http: HttpClient,\n    @Inject(LOCALE_ID) public locale: string\n  ) {\n    this.loadData();\n  }\n\n  public loadData(): void {\n    forkJoin([\n      this.http.get<Settings>(SETTINGS_URL).pipe(\n        map(d => {\n          this.processSettings(d);\n          return true;\n        })\n      ), \n      this.http.get<Texts>(TEXTS_URL).pipe(\n        map(d => {\n          this.texts = d;\n          return true;\n        })\n      ), \n    ]).subscribe(_ => this.ready.next(true));\n  }\n\n  /*\n   * Process the whole settings json object\n   */\n  public processSettings(settings: Settings): void {\n    this.settings = {\n      version: settings.version,\n      rounds:  settings.rounds\n    };\n\n    for (const list of ['indicators', 'ribbons', 'scenarios', 'strategies'])\n      this[list] = this.processJsonList(settings[list]);\n\n    this.firstScenario = settings.scenarios[0];\n  }\n\n  /*\n   * Create proper objects from settings.json sublists\n   */\n  public processJsonList(data: Array<any>): {[id: string]: any} {\n    const dict: {[id: string]: any} = {};\n    data.forEach(d => \n      dict[d.id] = d\n    );\n    return dict;\n  }\n\n  /*\n   * Return the prompt text in current locale or the text itself if that's not available.\n   * If text is a localized string, select the correct localized version or use the default.\n   * Note that if the text is to contain any HTML markup, it should be used as a bound\n   * property, i.e., <span [innerHTML]=\"shared.getText('Text')\"></span>. It will be \n   * sanitized by Angular but basic formatting and links are allowed, at least.\n   */\n  public getText(text: string | LocalizedString): string {\n    if (text == null)\n      return \"\";\n    else if (typeof text === \"string\")\n      return this.texts[text]?.[this.locale] ?? text;\n    else\n      return text[this.locale] ?? text[DEFAULT_LOCALE];\n  }\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}